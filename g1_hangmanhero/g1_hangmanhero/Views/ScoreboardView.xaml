<Window x:Class="g1_hangmanhero.Views.ScoreboardView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:g1_hangmanhero.Views"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        Title="Score Board" Height="500" Width="900">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="8*"/>
            <RowDefinition Height="1*"/>
        </Grid.RowDefinitions>

        <!-- 🔍 Thanh Search & Sort -->
        <DockPanel Grid.Row="0" Margin="0,0,0,10" LastChildFill="False">
            <TextBlock Text="Search By Username: " FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            <!-- Ô Search -->
            <TextBox Width="250"
                     Height="30"
                     VerticalAlignment="Center"
                     HorizontalAlignment="Center"
                     Margin="0,0,10,0"
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                     ToolTip="Nhập Username để tìm kiếm"/>

            <!-- Nút Clear -->
            <Button Content="X Clear"
                    Width="50"
                    Height="30"
                    FontWeight="Bold"
                    Command="{Binding ClearCommand}"
                    Background="#FF2196F3"
                    Foreground="White"
                    Margin="0,0,20,0"
                    VerticalAlignment="Center"/>

            <!-- Sort Ascending -->
            <Button Content="Sort Score ↑"
                    Width="120"
                    Height="30"
                    FontWeight="Bold"
                    Command="{Binding SortScoreAscCommand}"
                    Background="#FF4CAF50"
                    Foreground="White"
                    Margin="0,0,10,0"
                    VerticalAlignment="Center"/>

            <!-- Sort Descending -->
            <Button Content="Sort Score ↓"
                    Width="120"
                    Height="30"
                    FontWeight="Bold"
                    Command="{Binding SortScoreDescCommand}"
                    Background="#FFF44336"
                    Foreground="White"
                    VerticalAlignment="Center"/>
        </DockPanel>

        <!-- 📊 DataGrid hiển thị dữ liệu -->
        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding GameHistories}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  AlternatingRowBackground="#FFEFEFEF"
                  GridLinesVisibility="Horizontal"
                  CanUserSortColumns="True"
                  Margin="0">

            <DataGrid.Columns>
                <!-- Username -->
                <DataGridTextColumn Header="Username" Binding="{Binding Player.Username}" Width="*" />

                <!-- Score -->
                <DataGridTextColumn Header="Score" Binding="{Binding Score}" Width="100"/>

                <!-- Mistakes -->
                <DataGridTextColumn Header="Mistakes" Binding="{Binding Mistakes}" Width="100"/>

                <!-- Time Taken -->
                <DataGridTextColumn Header="Time Taken (s)" Binding="{Binding TimeTaken}" Width="120"/>

                <!-- Played At (format đẹp) -->
                <DataGridTextColumn Header="Played At" Width="200">
                    <DataGridTextColumn.Binding>
                        <Binding Path="PlayedAt" StringFormat="{}{0:dd/MM/yyyy HH:mm}"/>
                    </DataGridTextColumn.Binding>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <Button Content="Back"
                    Width="50"
                    Height="30"
                    FontWeight="Bold"
                    Command="{Binding BackCommand}"
                    Background="Gray"
                    Foreground="White"
                    Margin="0,0,20,0"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Left"
                    Grid.Row="3"/>
    </Grid>
</Window>
